<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>Rakefile - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/darkfish.js"></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../Diagrama de Estados_mdj.html">Diagrama de Estados.mdj</a>
  
    <li><a href="../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../README_md.html">README</a>
  
    <li><a href="../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../app/assets/config/manifest_js.html">manifest.js</a>
  
    <li><a href="../../../app/assets/javascripts/adjuntos_coffee.html">adjuntos.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../app/assets/javascripts/areas_coffee.html">areas.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/bootstrap_js_coffee.html">bootstrap.js.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/cable_js.html">cable.js</a>
  
    <li><a href="../../../app/assets/javascripts/estados_coffee.html">estados.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/notificaciones_coffee.html">notificaciones.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/parametros_coffee.html">parametros.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/permisos_coffee.html">permisos.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/roles_coffee.html">roles.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/seguimientos_coffee.html">seguimientos.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/solicituds_coffee.html">solicituds.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/tipo_notificaciones_coffee.html">tipo_notificaciones.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/tipo_seguimientos_coffee.html">tipo_seguimientos.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/tipo_solicitudes_coffee.html">tipo_solicitudes.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/users_coffee.html">users.coffee</a>
  
    <li><a href="../../../app/assets/javascripts/welcome_coffee.html">welcome.coffee</a>
  
    <li><a href="../../../app/assets/stylesheets/adjuntos_scss.html">adjuntos.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../app/assets/stylesheets/areas_scss.html">areas.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/bootstrap_and_overrides_css.html">bootstrap_and_overrides.css</a>
  
    <li><a href="../../../app/assets/stylesheets/bootstrap_and_overrides_css_less.html">bootstrap_and_overrides.css.less</a>
  
    <li><a href="../../../app/assets/stylesheets/estados_scss.html">estados.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/flexboxgrid_css.html">flexboxgrid.css</a>
  
    <li><a href="../../../app/assets/stylesheets/notificaciones_scss.html">notificaciones.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/parametros_scss.html">parametros.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/permisos_scss.html">permisos.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/roles_scss.html">roles.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/scaffolds_scss.html">scaffolds.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/seguimientos_scss.html">seguimientos.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/solicituds_scss.html">solicituds.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/style_scss.html">style.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/tipo_notificaciones_scss.html">tipo_notificaciones.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/tipo_seguimientos_scss.html">tipo_seguimientos.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/tipo_solicitudes_scss.html">tipo_solicitudes.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/users_scss.html">users.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/welcome_scss.html">welcome.scss</a>
  
    <li><a href="../../../app/views/adjuntos/_adjunto_json_jbuilder.html">_adjunto.json.jbuilder</a>
  
    <li><a href="../../../app/views/adjuntos/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/adjuntos/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/areas/_area_json_jbuilder.html">_area.json.jbuilder</a>
  
    <li><a href="../../../app/views/areas/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/areas/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/estados/_estado_json_jbuilder.html">_estado.json.jbuilder</a>
  
    <li><a href="../../../app/views/estados/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/estados/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/notificaciones/_notificacione_json_jbuilder.html">_notificacione.json.jbuilder</a>
  
    <li><a href="../../../app/views/notificaciones/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/notificaciones/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/parametros/_parametro_json_jbuilder.html">_parametro.json.jbuilder</a>
  
    <li><a href="../../../app/views/parametros/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/parametros/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/permisos/_permiso_json_jbuilder.html">_permiso.json.jbuilder</a>
  
    <li><a href="../../../app/views/permisos/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/permisos/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/roles/_role_json_jbuilder.html">_role.json.jbuilder</a>
  
    <li><a href="../../../app/views/roles/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/roles/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/seguimientos/_seguimiento_json_jbuilder.html">_seguimiento.json.jbuilder</a>
  
    <li><a href="../../../app/views/seguimientos/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/seguimientos/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/solicituds/_solicitud_json_jbuilder.html">_solicitud.json.jbuilder</a>
  
    <li><a href="../../../app/views/solicituds/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/solicituds/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_notificaciones/_tipo_notificacione_json_jbuilder.html">_tipo_notificacione.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_notificaciones/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_notificaciones/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_seguimientos/_tipo_seguimiento_json_jbuilder.html">_tipo_seguimiento.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_seguimientos/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_seguimientos/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_solicitudes/_tipo_solicitude_json_jbuilder.html">_tipo_solicitude.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_solicitudes/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/tipo_solicitudes/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../app/views/users/_user_json_jbuilder.html">_user.json.jbuilder</a>
  
    <li><a href="../../../app/views/users/index_json_jbuilder.html">index.json.jbuilder</a>
  
    <li><a href="../../../app/views/users/show_json_jbuilder.html">show.json.jbuilder</a>
  
    <li><a href="../../../config_ru.html">config.ru</a>
  
    <li><a href="../../../config/credentials_yml_enc.html">credentials.yml.enc</a>
  
    <li><a href="../../../config/master_key.html">master.key</a>
  
    <li><a href="../../../log/development_log.html">development.log</a>
  
    <li><a href="../../../package_json.html">package.json</a>
  
    <li><a href="../../../public/404_html.html">404.html</a>
  
    <li><a href="../../../public/422_html.html">422.html</a>
  
    <li><a href="../../../public/500_html.html">500.html</a>
  
    <li><a href="../../../public/apple-touch-icon-precomposed_png.html">apple-touch-icon-precomposed.png</a>
  
    <li><a href="../../../public/apple-touch-icon_png.html">apple-touch-icon.png</a>
  
    <li><a href="../../../public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../../public/robots_txt.html">robots</a>
  
    <li><a href="../../../th-pg-include/extensions/x86_64-linux/2_5_0-static/pg-1_0_0/gem_make_out.html">gem_make.out</a>
  
    <li><a href="../../../th-pg-include/extensions/x86_64-linux/2_5_0-static/pg-1_0_0/mkmf_log.html">mkmf.log</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/BSDL.html">BSDL</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/ChangeLog.html">ChangeLog</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/Contributors_rdoc.html">Contributors</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/History_rdoc.html">History</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/Manifest_txt.html">Manifest</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/POSTGRES.html">POSTGRES</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/README-OS_X_rdoc.html">README-OS_X</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/README-Windows_rdoc.html">README-Windows</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/README_ja_rdoc.html">README.ja</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/README_rdoc.html">README</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/Rakefile_cross.html">Rakefile.cross</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/ext/errorcodes_def.html">errorcodes.def</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/ext/errorcodes_txt.html">errorcodes</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/ext/vc/pg_sln.html">pg.sln</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/ext/vc/pg_18/pg_vcproj.html">pg.vcproj</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/ext/vc/pg_19/pg_19_vcproj.html">pg_19.vcproj</a>
  
    <li><a href="../../../th-pg-include/gems/pg-1_0_0/spec/data/expected_trace_out.html">expected_trace.out</a>
  
    <li><a href="../../../tmp/restart_txt.html">restart</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page th-pg-include/gems/pg-1.0.0/Rakefile">

<p>#!/usr/bin/env rake</p>

<p>require &#39;rbconfig&#39; require &#39;pathname&#39; require
&#39;tmpdir&#39;</p>

<p>begin</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rake/extensiontask&#39;</span>
</pre>

<p>rescue LoadError</p>

<pre class="ruby"><span class="ruby-identifier">abort</span> <span class="ruby-string">&quot;This Rakefile requires rake-compiler (gem install rake-compiler)&quot;</span>
</pre>

<p>end</p>

<p>begin</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;hoe&#39;</span>
</pre>

<p>rescue LoadError</p>

<pre class="ruby"><span class="ruby-identifier">abort</span> <span class="ruby-string">&quot;This Rakefile requires hoe (gem install hoe)&quot;</span>
</pre>

<p>end</p>

<p>require &#39;rake/clean&#39;</p>

<p># Build directory constants BASEDIR = Pathname( __FILE__ ).dirname SPECDIR
= BASEDIR + &#39;spec&#39; LIBDIR  = BASEDIR + &#39;lib&#39; EXTDIR  =
BASEDIR + &#39;ext&#39; PKGDIR  = BASEDIR + &#39;pkg&#39; TMPDIR  = BASEDIR
+ &#39;tmp&#39;</p>

<p>DLEXT   = <a href="'DLEXT'">RbConfig::CONFIG</a> EXT     = LIBDIR +
“pg_ext.#{DLEXT}”</p>

<p>GEMSPEC = &#39;pg.gemspec&#39;</p>

<p>TEST_DIRECTORY = BASEDIR + “tmp_test_specs”</p>

<p>CLOBBER.include( TEST_DIRECTORY.to_s ) CLEAN.include( PKGDIR.to_s,
TMPDIR.to_s )</p>

<p># Set up Hoe plugins Hoe.plugin :mercurial Hoe.plugin :signing Hoe.plugin
:deveiate Hoe.plugin :bundler</p>

<p>Hoe.plugins.delete :rubyforge Hoe.plugins.delete :compiler</p>

<p>load &#39;Rakefile.cross&#39;</p>

<p># Hoe specification $hoespec = Hoe.spec &#39;pg&#39; do</p>

<pre class="ruby"><span class="ruby-keyword">self</span>.<span class="ruby-identifier">readme_file</span> = <span class="ruby-string">&#39;README.rdoc&#39;</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">history_file</span> = <span class="ruby-string">&#39;History.rdoc&#39;</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">extra_rdoc_files</span> = <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">FileList</span>[ <span class="ruby-string">&#39;*.rdoc&#39;</span> ]
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">extra_rdoc_files</span>.<span class="ruby-identifier">include</span>( <span class="ruby-string">&#39;POSTGRES&#39;</span>, <span class="ruby-string">&#39;LICENSE&#39;</span> )
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">extra_rdoc_files</span>.<span class="ruby-identifier">include</span>( <span class="ruby-string">&#39;ext  .c&#39;</span> )
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">license</span> <span class="ruby-string">&#39;BSD-3-Clause&#39;</span>

<span class="ruby-keyword">self</span>.<span class="ruby-identifier">developer</span> <span class="ruby-string">&#39;Michael Granger&#39;</span>, <span class="ruby-string">&#39;ged@FaerieMUD.org&#39;</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">developer</span> <span class="ruby-string">&#39;Lars Kanis&#39;</span>, <span class="ruby-string">&#39;lars@greiz-reinsdorf.de&#39;</span>

<span class="ruby-keyword">self</span>.<span class="ruby-identifier">dependency</span> <span class="ruby-string">&#39;rake-compiler&#39;</span>, <span class="ruby-string">&#39;~&gt; 1.0&#39;</span>, <span class="ruby-value">:developer</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">dependency</span> <span class="ruby-string">&#39;rake-compiler-dock&#39;</span>, [<span class="ruby-string">&#39;~&gt; 0.6&#39;</span>, <span class="ruby-string">&#39;&gt;= 0.6.2&#39;</span>], <span class="ruby-value">:developer</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">dependency</span> <span class="ruby-string">&#39;hoe-deveiate&#39;</span>, <span class="ruby-string">&#39;~&gt; 0.9&#39;</span>, <span class="ruby-value">:developer</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">dependency</span> <span class="ruby-string">&#39;hoe-bundler&#39;</span>, <span class="ruby-string">&#39;~&gt; 1.0&#39;</span>, <span class="ruby-value">:developer</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">dependency</span> <span class="ruby-string">&#39;rspec&#39;</span>, <span class="ruby-string">&#39;~&gt; 3.5&#39;</span>, <span class="ruby-value">:developer</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">dependency</span> <span class="ruby-string">&#39;rdoc&#39;</span>, <span class="ruby-string">&#39;~&gt; 5.1&#39;</span>, <span class="ruby-value">:developer</span>

<span class="ruby-keyword">self</span>.<span class="ruby-identifier">spec_extras</span>[<span class="ruby-value">:extensions</span>] = [ <span class="ruby-string">&#39;ext/extconf.rb&#39;</span> ]

<span class="ruby-keyword">self</span>.<span class="ruby-identifier">require_ruby_version</span>( <span class="ruby-string">&#39;&gt;= 2.0.0&#39;</span> )

<span class="ruby-keyword">self</span>.<span class="ruby-identifier">hg_sign_tags</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">respond_to?</span>( <span class="ruby-value">:hg_sign_tags=</span> )
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">check_history_on_release</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">respond_to?</span>( <span class="ruby-value">:check_history_on_release=</span> )

<span class="ruby-keyword">self</span>.<span class="ruby-identifier">rdoc_locations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;deveiate:/usr/local/www/public/code/#{remote_rdoc_dir}&quot;</span>
</pre>

<p>end</p>

<p><a href="'VERSION'">ENV</a> ||= $hoespec.spec.version.to_s</p>

<p># Tests should pass before checking in task &#39;hg:precheckin&#39; =&gt; [
:check_history, :check_manifest, :spec, :gemspec ]</p>

<p># Support for &#39;rvm specs&#39; task :specs =&gt; :spec</p>

<p># Compile before testing task :spec =&gt; :compile</p>

<p># gem-testers support task :test do</p>

<pre class="ruby"><span class="ruby-comment"># rake-compiler always wants to copy the compiled extension into lib/, but</span>
<span class="ruby-comment"># we don&#39;t want testers to have to re-compile, especially since that</span>
<span class="ruby-comment"># often fails because they can&#39;t (and shouldn&#39;t have to) write to tmp/ in</span>
<span class="ruby-comment"># the installed gem dir. So we clear the task rake-compiler set up</span>
<span class="ruby-comment"># to break the dependency between :spec and :compile when running under</span>
<span class="ruby-comment"># rubygems-test, and then run :spec.</span>
<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>[ <span class="ruby-constant">EXT</span>.<span class="ruby-identifier">to_s</span> ].<span class="ruby-identifier">clear</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-constant">EXT</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>[ <span class="ruby-value">:spec</span> ].<span class="ruby-identifier">execute</span>
</pre>

<p>end</p>

<p>desc “Turn on warnings and debugging in the build.” task :maint do</p>

<pre class="ruby"><span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;MAINTAINER_MODE&#39;</span>] = <span class="ruby-string">&#39;yes&#39;</span>
</pre>

<p>end</p>

<p># Rake-compiler task Rake::ExtensionTask.new do |ext|</p>

<pre class="ruby"><span class="ruby-identifier">ext</span>.<span class="ruby-identifier">name</span>           = <span class="ruby-string">&#39;pg_ext&#39;</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">gem_spec</span>       = <span class="ruby-identifier">$hoespec</span>.<span class="ruby-identifier">spec</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">ext_dir</span>        = <span class="ruby-string">&#39;ext&#39;</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">lib_dir</span>        = <span class="ruby-string">&#39;lib&#39;</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">source_pattern</span> = <span class="ruby-string">&quot;*.{c,h}&quot;</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_compile</span>  = <span class="ruby-keyword">true</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_platform</span> = <span class="ruby-constant">CrossLibraries</span>.<span class="ruby-identifier">map</span> <span class="ruby-operator">&amp;</span><span class="ruby-value">:for_platform</span>

<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_config_options</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">CrossLibraries</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lib</span><span class="ruby-operator">|</span>
        {
                <span class="ruby-identifier">lib</span>.<span class="ruby-identifier">for_platform</span> <span class="ruby-operator">=&gt;</span> [
                        <span class="ruby-string">&quot;--enable-windows-cross&quot;</span>,
                        <span class="ruby-node">&quot;--with-pg-include=#{lib.static_postgresql_incdir}&quot;</span>,
                        <span class="ruby-node">&quot;--with-pg-lib=#{lib.static_postgresql_libdir}&quot;</span>,
                        <span class="ruby-comment"># libpq-fe.h resides in src/interfaces/libpq/ before make install</span>
                        <span class="ruby-node">&quot;--with-opt-include=#{lib.static_postgresql_libdir}&quot;</span>,
                ]
        }
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># Add libpq.dll to windows binary gemspec</span>
<span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_compiling</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;lib/libpq.dll&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>end</p>

<p># Use the fivefish formatter for docs generated from development checkout
if File.directory?( &#39;.hg&#39; )</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rdoc/task&#39;</span>

<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>[ <span class="ruby-string">&#39;docs&#39;</span> ].<span class="ruby-identifier">clear</span>
<span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>( <span class="ruby-string">&#39;docs&#39;</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rdoc</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">main</span> = <span class="ruby-string">&quot;README.rdoc&quot;</span>
        <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">rdoc_files</span>.<span class="ruby-identifier">include</span>( <span class="ruby-string">&quot;*.rdoc&quot;</span>, <span class="ruby-string">&quot;ChangeLog&quot;</span>, <span class="ruby-string">&quot;lib/   *.rb&quot;</span>, <span class="ruby-string">&#39;ext   /*.{c,h}&#39;</span> )
        <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">generator</span> = <span class="ruby-value">:fivefish</span>
        <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;PG: The Ruby PostgreSQL Driver&quot;</span>
        <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">rdoc_dir</span> = <span class="ruby-string">&#39;doc&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>end</p>

<p># Make the <a href="ChangeLog.html">ChangeLog</a> update if the repo has
changed since it was last built file &#39;.hg/branch&#39; do</p>

<pre class="ruby"><span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;WARNING: You need the Mercurial repo to update the ChangeLog&quot;</span>
</pre>

<p>end <a href=""ChangeLog"">Rake::Task</a>.clear file &#39;ChangeLog&#39; do
|task|</p>

<pre class="ruby"><span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-string">&#39;.hg/branch&#39;</span>)
        <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Updating the changelog...&quot;</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">include</span> <span class="ruby-constant">Hoe</span><span class="ruby-operator">::</span><span class="ruby-constant">MercurialHelpers</span>
                <span class="ruby-identifier">content</span> = <span class="ruby-identifier">make_changelog</span>()
        <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span>
                <span class="ruby-identifier">abort</span> <span class="ruby-string">&quot;Packaging tasks require the hoe-mercurial plugin (gem install hoe-mercurial)&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>( <span class="ruby-identifier">task</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&#39;w&#39;</span>, <span class="ruby-value">0644</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fh</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">fh</span>.<span class="ruby-identifier">print</span>( <span class="ruby-identifier">content</span> )
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">else</span>
        <span class="ruby-identifier">touch</span> <span class="ruby-string">&#39;ChangeLog&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>end</p>

<p># Rebuild the <a href="ChangeLog.html">ChangeLog</a> immediately before
release task :prerelease =&gt; &#39;ChangeLog&#39;</p>

<p>desc “Stop any Postmaster instances that remain after testing.” task
:cleanup_testing_dbs do</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;spec/lib/helpers&#39;</span>
<span class="ruby-constant">PgTestingHelpers</span>.<span class="ruby-identifier">stop_existing_postmasters</span>()
<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>[<span class="ruby-value">:clean</span>].<span class="ruby-identifier">invoke</span>
</pre>

<p>end</p>

<p>desc “Update list of server error codes” task :update_error_codes do</p>

<pre class="ruby"><span class="ruby-constant">URL_ERRORCODES_TXT</span> = <span class="ruby-string">&quot;http://git.postgresql.org/gitweb/?p=postgresql.git;a=blob_plain;f=src/backend/utils/errcodes.txt;hb=refs/tags/REL_10_1&quot;</span>

<span class="ruby-constant">ERRORCODES_TXT</span> = <span class="ruby-string">&quot;ext/errorcodes.txt&quot;</span>
<span class="ruby-identifier">sh</span> <span class="ruby-node">&quot;wget #{URL_ERRORCODES_TXT.inspect} -O #{ERRORCODES_TXT.inspect} || curl #{URL_ERRORCODES_TXT.inspect} -o #{ERRORCODES_TXT.inspect}&quot;</span>

<span class="ruby-identifier">ruby</span> <span class="ruby-string">&#39;ext/errorcodes.rb&#39;</span>, <span class="ruby-string">&#39;ext/errorcodes.txt&#39;</span>, <span class="ruby-string">&#39;ext/errorcodes.def&#39;</span>
</pre>

<p>end</p>

<p>file &#39;ext/pg_errors.c&#39; =&gt; [&#39;ext/errorcodes.def&#39;] do</p>

<pre class="ruby"><span class="ruby-comment"># trigger compilation of changed errorcodes.def</span>
<span class="ruby-identifier">touch</span> <span class="ruby-string">&#39;ext/pg_errors.c&#39;</span>
</pre>

<p>end</p>

<p>task :gemspec =&gt; GEMSPEC file GEMSPEC =&gt; __FILE__ task GEMSPEC do
|task|</p>

<pre class="ruby"><span class="ruby-identifier">spec</span> = <span class="ruby-identifier">$hoespec</span>.<span class="ruby-identifier">spec</span>
<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">delete</span>( <span class="ruby-string">&#39;.gemtest&#39;</span> )
<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">signing_key</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span> = <span class="ruby-node">&quot;#{spec.version.bump}.0.pre#{Time.now.strftime(&quot;%Y%m%d%H%M%S&quot;)}&quot;</span>
<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cert_chain</span> = [ <span class="ruby-string">&#39;certs/ged.pem&#39;</span> ]
<span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>( <span class="ruby-identifier">task</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&#39;w&#39;</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fh</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">fh</span>.<span class="ruby-identifier">write</span>( <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_ruby</span> )
<span class="ruby-keyword">end</span>
</pre>

<p>end</p>

<p>CLOBBER.include( &#39;*.gemspec&#39; ) task :default =&gt; :gemspec</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.0.4.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

